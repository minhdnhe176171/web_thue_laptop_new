@model IEnumerable<web_chothue_laptop.Models.TechnicalTicket>
@{
    ViewData["Title"] = "Báo cáo";
}

@functions {
    private static string TranslateStatus(string? name) => name?.ToLower() switch
    {
        "pending" => "Đang chờ xử lý",
        "đang chờ xử lý" => "Đang chờ xử lý",
        "approved" => "Đã phê duyệt",
        "rejected" => "Bị từ chối",
        _ => name ?? string.Empty
    };
}

<h2>Báo cáo</h2>
<p>Tổng thu nhập từ các laptop của bạn: <strong>@(ViewBag.Income ?? 0m)</strong></p>

<h4>Lỗi máy / phiếu kỹ thuật</h4>
<table class="table">
    <thead>
        <tr>
            <th>Ngày tạo</th>
            <th>Laptop</th>
            <th>Mô tả</th>
            <th>Trạng thái</th>
        </tr>
    </thead>
    <tbody>
@foreach(var t in Model)
{
    <tr>
        <td>@t.CreatedDate</td>
        <td>@t.Laptop?.Name</td>
        <td>@t.Description</td>
        <td>@TranslateStatus(t.Status?.StatusName)</td>
    </tr>
}
    </tbody>
</table>