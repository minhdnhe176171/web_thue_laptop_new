@model web_chothue_laptop.ViewModels.DeliveryViewModel
@{
    ViewData["Title"] = "Tạo Phiếu Giao Máy";
}

<div class="container-fluid py-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="text-primary fw-bold">Tạo Phiếu Giao Máy</h2>
        <a asp-action="Deliveries" class="btn btn-outline-secondary">
            <i class="fas fa-arrow-left"></i> Quay lại
        </a>
    </div>

    <form asp-action="CreateDelivery" method="post" enctype="multipart/form-data">
        @Html.AntiForgeryToken()
        <input type="hidden" asp-for="BookingId" />
        
        <div class="row">
            <!-- Thông tin booking -->
            <div class="col-md-6">
                <div class="card shadow-sm mb-4">
                    <div class="card-header bg text-black">
                        <h5 class="mb-0"><i class="fas fa-file-alt"></i> Thông Tin Booking</h5>
                    </div>
                    <div class="card-body">
                        <dl class="row mb-0">
                            <dt class="col-sm-5">Mã Booking:</dt>
                            <dd class="col-sm-7"><span class="badge bg-primary">#@Model.BookingId</span></dd>

                            <dt class="col-sm-5">Khách hàng:</dt>
                            <dd class="col-sm-7">@Model.CustomerName</dd>

                            <dt class="col-sm-5">Laptop:</dt>
                            <dd class="col-sm-7"><strong>@Model.LaptopName</strong></dd>

                            <dt class="col-sm-5">Ngày thuê:</dt>
                            <dd class="col-sm-7">@Model.StartDate?.ToString("dd/MM/yyyy")</dd>

                            <dt class="col-sm-5">Ngày trả:</dt>
                            <dd class="col-sm-7">@Model.EndDate?.ToString("dd/MM/yyyy")</dd>

                            <dt class="col-sm-5">Tổng tiền:</dt>
                            <dd class="col-sm-7"><span class="text-success fw-bold">@(Model.TotalPrice?.ToString("#,##0") ?? "0") đ</span></dd>
                        </dl>
                    </div>
                </div>

                <div class="card shadow-sm mb-4">
                    <div class="card-header text-black">
                        <h5 class="mb-0"><i class="fas fa-laptop"></i> Thông Số Kỹ Thuật</h5>
                    </div>
                    <div class="card-body">
                        <dl class="row mb-0">
                            @if (!string.IsNullOrEmpty(Model.Cpu))
                            {
                                <dt class="col-sm-5"><i class="fas fa-microchip"></i> CPU:</dt>
                                <dd class="col-sm-7">@Model.Cpu</dd>
                            }

                            @if (!string.IsNullOrEmpty(Model.RamSize))
                            {
                                <dt class="col-sm-5"><i class="fas fa-memory"></i> RAM:</dt>
                                <dd class="col-sm-7">@Model.RamSize</dd>
                            }

                            @if (!string.IsNullOrEmpty(Model.Storage))
                            {
                                <dt class="col-sm-5"><i class="fas fa-hdd"></i> Storage:</dt>
                                <dd class="col-sm-7">@Model.Storage</dd>
                            }

                            @if (!string.IsNullOrEmpty(Model.Gpu))
                            {
                                <dt class="col-sm-5"><i class="fas fa-th"></i> GPU:</dt>
                                <dd class="col-sm-7">@Model.Gpu</dd>
                            }

                            @if (!string.IsNullOrEmpty(Model.ScreenSize))
                            {
                                <dt class="col-sm-5"><i class="fas fa-desktop"></i> Màn hình:</dt>
                                <dd class="col-sm-7">@Model.ScreenSize</dd>
                            }

                            @if (!string.IsNullOrEmpty(Model.Os))
                            {
                                <dt class="col-sm-5"><i class="fab fa-windows"></i> OS:</dt>
                                <dd class="col-sm-7">@Model.Os</dd>
                            }
                        </dl>
                    </div>
                </div>
            </div>

            <!-- Kiểm tra tình trạng máy -->
            <div class="col-md-6">
                <div class="card shadow-sm mb-4">
                    <div class="card-header  text-black">
                        <h5 class="mb-0"><i class="fas fa-check-circle"></i> Kiểm Tra Tình Trạng Máy</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <div class="form-check">
                                <input asp-for="ScreenCondition" class="form-check-input" />
                                <label asp-for="ScreenCondition" class="form-check-label">
                                    <i class="fas fa-desktop"></i> Màn hình hoạt động tốt
                                </label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <div class="form-check">
                                <input asp-for="KeyboardCondition" class="form-check-input" />
                                <label asp-for="KeyboardCondition" class="form-check-label">
                                    <i class="fas fa-keyboard"></i> Bàn phím hoạt động tốt
                                </label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <div class="form-check">
                                <input asp-for="MouseCondition" class="form-check-input" />
                                <label asp-for="MouseCondition" class="form-check-label">
                                    <i class="fas fa-mouse"></i> Chuột đi kèm (nếu có)
                                </label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <div class="form-check">
                                <input asp-for="ChargerCondition" class="form-check-input" />
                                <label asp-for="ChargerCondition" class="form-check-label">
                                    <i class="fas fa-plug"></i> Sạc hoạt động tốt
                                </label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <div class="form-check">
                                <input asp-for="BodyCondition" class="form-check-input" />
                                <label asp-for="BodyCondition" class="form-check-label">
                                    <i class="fas fa-laptop"></i> Vỏ máy không trầy xước
                                </label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label asp-for="BatteryLevel" class="form-label">
                                <i class="fas fa-battery-full"></i> Mức pin hiện tại (%)
                            </label>
                            <input asp-for="BatteryLevel" type="number" class="form-control" min="0" max="100" />
                            <span asp-validation-for="BatteryLevel" class="text-danger"></span>
                        </div>

                        <div class="mb-3">
                            <label asp-for="ConditionImage" class="form-label">
                                <i class="fas fa-camera"></i> Upload ảnh tình trạng máy
                            </label>
                            <input asp-for="ConditionImage" type="file" class="form-control" accept="image/*" />
                            <small class="text-muted">Chụp ảnh laptop trước khi giao</small>
                        </div>

                        <div class="mb-3">
                            <label asp-for="Notes" class="form-label">
                                <i class="fas fa-sticky-note"></i> Ghi chú
                            </label>
                            <textarea asp-for="Notes" class="form-control" rows="3" placeholder="Ghi chú thêm về tình trạng máy..."></textarea>
                            <span asp-validation-for="Notes" class="text-danger"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card shadow-sm">
            <div class="card-body text-center">
                <button type="submit" class="btn btn-success btn-lg px-5">
                    <i class="fas fa-check"></i> Xác Nhận Giao Máy
                </button>
                <a asp-action="Deliveries" class="btn btn-secondary btn-lg px-5 ms-3">
                    <i class="fas fa-times"></i> Hủy
                </a>
            </div>
        </div>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
