@model web_chothue_laptop.Models.Booking?

@{
    ViewData["Title"] = "Thanh Toán B? H?y";
}

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-6 col-md-8">
            <div class="card shadow-lg border-0">
                <!-- Icon h?y -->
                <div class="card-body text-center p-5">
                    <div class="cancel-animation mb-4">
                        <svg class="cancel-mark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                            <circle class="cancel-circle" cx="26" cy="26" r="25" fill="none"/>
                            <path class="cancel-cross1" fill="none" d="M16 16 L36 36"/>
                            <path class="cancel-cross2" fill="none" d="M36 16 L16 36"/>
                        </svg>
                    </div>
                    
                    <h1 class="text-warning mb-3">
                        <i class="bi bi-exclamation-triangle-fill"></i> Thanh Toán B? H?y
                    </h1>
                    
                    <p class="lead text-muted mb-4">
                        Giao d?ch c?a b?n ?ã b? h?y. Không có kho?n ti?n nào ???c tr?.
                    </p>

                    @if (Model != null)
                    {
                        <div class="alert alert-warning mb-4">
                            <h5 class="alert-heading">Thông tin ??n hàng</h5>
                            <hr>
                            <div class="row text-start">
                                <div class="col-6">
                                    <strong>Mã ??n hàng:</strong>
                                </div>
                                <div class="col-6">
                                    <span class="badge bg-secondary">#@Model.Id</span>
                                </div>
                            </div>
                            <div class="row text-start mt-2">
                                <div class="col-6">
                                    <strong>Laptop:</strong>
                                </div>
                                <div class="col-6">
                                    @Model.Laptop?.Name
                                </div>
                            </div>
                            <div class="row text-start mt-2">
                                <div class="col-6">
                                    <strong>T?ng ti?n:</strong>
                                </div>
                                <div class="col-6">
                                    <span class="fw-bold">@(Model.TotalPrice?.ToString("N0")) VN?</span>
                                </div>
                            </div>
                            <div class="row text-start mt-2">
                                <div class="col-6">
                                    <strong>Tr?ng thái:</strong>
                                </div>
                                <div class="col-6">
                                    <span class="badge bg-warning text-dark">Ch?a thanh toán</span>
                                </div>
                            </div>
                        </div>

                        <div class="alert alert-info">
                            <i class="bi bi-info-circle"></i> 
                            ??n hàng c?a b?n v?n còn hi?u l?c. B?n có th? th? thanh toán l?i ho?c thanh toán tr?c ti?p khi nh?n máy.
                        </div>
                    }
                    else
                    {
                        <div class="alert alert-secondary mb-4">
                            <i class="bi bi-info-circle"></i> 
                            Không tìm th?y thông tin ??n hàng. Vui lòng ki?m tra l?i.
                        </div>
                    }

                    <div class="d-grid gap-2 mt-4">
                        @if (Model != null)
                        {
                            <a href="@Url.Action("OnlinePayment", "Booking", new { bookingId = Model.Id })" class="btn btn-primary btn-lg">
                                <i class="bi bi-credit-card"></i> Th? Thanh Toán L?i
                            </a>
                            <a href="@Url.Action("Payment", "Booking", new { id = Model.Id })" class="btn btn-outline-primary">
                                <i class="bi bi-receipt"></i> Xem Phi?u H?n Nh?n Máy
                            </a>
                        }
                        <a href="@Url.Action("MyBookings", "Booking")" class="btn btn-outline-secondary">
                            <i class="bi bi-list-check"></i> Xem ??n Hàng C?a Tôi
                        </a>
                        <a href="@Url.Action("Index", "Home")" class="btn btn-outline-secondary">
                            <i class="bi bi-house"></i> V? Trang Ch?
                        </a>
                    </div>
                </div>
            </div>

            <!-- Lý do có th? h?y -->
            <div class="card mt-4 shadow-sm border-0">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="bi bi-question-circle"></i> T?i sao thanh toán b? h?y?
                    </h5>
                    <ul class="list-unstyled mt-3">
                        <li class="mb-2">
                            <i class="bi bi-check-circle text-muted"></i> B?n ?ã click nút "H?y" trên trang thanh toán
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle text-muted"></i> ?óng c?a s? thanh toán tr??c khi hoàn t?t
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle text-muted"></i> H?t th?i gian ch? thanh toán
                        </li>
                        <li class="mb-2">
                            <i class="bi bi-check-circle text-muted"></i> Thông tin th?/tài kho?n không h?p l?
                        </li>
                    </ul>
                    <p class="text-muted small mb-0">
                        <i class="bi bi-info-circle"></i> N?u b?n g?p v?n ?? khi thanh toán, vui lòng liên h? h? tr? ho?c thanh toán tr?c ti?p khi nh?n máy.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .cancel-animation {
        animation: shakeAnimation 0.6s ease-in-out;
    }

    @@keyframes shakeAnimation {
        0%, 100% {
            transform: translateX(0);
        }
        10%, 30%, 50%, 70%, 90% {
            transform: translateX(-10px);
        }
        20%, 40%, 60%, 80% {
            transform: translateX(10px);
        }
    }

    .cancel-mark {
        width: 100px;
        height: 100px;
        margin: 0 auto;
        animation: cancelAnimation 0.8s ease-in-out;
    }

    @@keyframes cancelAnimation {
        0% {
            transform: scale(0) rotate(0deg);
            opacity: 0;
        }
        50% {
            transform: scale(1.2) rotate(180deg);
            opacity: 0.7;
        }
        100% {
            transform: scale(1) rotate(360deg);
            opacity: 1;
        }
    }

    .cancel-circle {
        stroke-dasharray: 166;
        stroke-dashoffset: 166;
        stroke-width: 2;
        stroke-miterlimit: 10;
        stroke: #ffc107;
        fill: none;
        animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
    }

    .cancel-cross1, .cancel-cross2 {
        stroke-dasharray: 28;
        stroke-dashoffset: 28;
        stroke: #ffc107;
        stroke-width: 3;
        stroke-linecap: round;
    }

    .cancel-cross1 {
        animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.6s forwards;
    }

    .cancel-cross2 {
        animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.75s forwards;
    }

    @@keyframes stroke {
        100% {
            stroke-dashoffset: 0;
        }
    }

    .card {
        border-radius: 15px;
        overflow: hidden;
    }

    .alert {
        border-radius: 10px;
    }

    .btn {
        border-radius: 8px;
        padding: 12px 24px;
        font-weight: 500;
    }

    .list-unstyled li {
        padding: 5px 0;
    }
</style>
